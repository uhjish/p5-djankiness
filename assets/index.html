<!DOCTYPE html>

<html>

  <head>
    <meta charset="utf-8" />
    <title>AngularJS Plunker</title>
    <script>document.write('<base href="' + document.location + '" />');</script>
    <link rel="stylesheet" href="http://getbootstrap.com/2.3.2/assets/css/bootstrap.css">
    <link rel="stylesheet" href="css/style.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.4/angular.js"></script>
    <script src="http://code.angularjs.org/1.2.4/angular-route.js"></script>
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.4/underscore-min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/restangular/1.5.1/restangular.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/0.13.4/ui-bootstrap-tpls.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/0.13.4/ui-bootstrap.min.js"></script>
    <script src="js/app.js"></script>
  </head>

  <body>
    <div ng-app="action">
      <div ng-view></div>

      <!-- CACHE FILE: list.html -->
      <script type="text/ng-template" id="list.html">
        <table>
          <thead>
            <tr>
              <th>Assignee</th>
              <th>Title</th>
              <th>Deadline</th>
              <th>Description</th>
              <th><a href="#/new"><i class="icon-plus-sign"></i></a></th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="action in actions | filter:search | orderBy:'title'" ng-show="action.id">
              <td>{{usernames[action.assignee]}}</td>
              <td>{{action.title}}</td>
              <td>{{action.deadline}}</td>
              <td>{{action.description}}</td>
              <td>
                <a href="#/edit/{{action.id}}"><i class="icon-pencil"></i></a>
              </td>
            </tr>
          </tbody>
        </table>
      </script>



      <!-- CACHE FILE: detail.html -->
      <script type="text/ng-template" id="detail.html">
        <form name="actionForm">
          <div>
            <label>Name</label>
            <input type="text" name="title" ng-model="action.title" required>
            <span ng-show="actionForm.title.$error.required" class="help-inline">
              Required</span>
          </div>
          <label>Assignee</label>
          <select ng-model="action.assignee">
            <option ng-selected="{{uid == action.assignee}}" 
                    ng-repeat="(uid,uname) in usernames" value={{uid}}>
              {{uname}}
            </option>
          </select>
          <label>Description</label>
          <textarea name="description" ng-model="action.description"></textarea>
          <div>
            <label>Deadline</label>
            <input type="date" class="form-control" uib-datepicker-popup ng-model="action.deadline" is-open="status.opened" ng-required="true" />
          </div>
          <br>

          <a href="#/" class="btn">Cancel</a>
          <button ng-click="save()" ng-disabled="isClean() || actionForm.$invalid"
            class="btn btn-primary">Save</button>
          <button ng-click="destroy()"
            ng-show="action.id" class="btn btn-danger">Delete</button>
        </form>
      </script>
    </div>

  </body>

</html>

